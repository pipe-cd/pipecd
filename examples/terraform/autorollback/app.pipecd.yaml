apiVersion: pipecd.dev/v1beta1
kind: TerraformApp
spec:
  name: autorollback
  labels:
    env: example
    team: infra
  input:
    autoRollback: true
  encryption:
    encryptedSecrets:
      serviceAccount: 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
    decryptionTargets:
      - .credentials/service-account.json
  description: |
    This app demonstrates how to enable auto-rollback feature for a Terraform application.\
    Once `spec.input.autoRollback` is enabled application will be rolled back to previous version if any error occurs.\
    References: [adding a new app](https://pipecd.dev/docs/user-guide/managing-application/adding-an-application/), [app configuration](https://pipecd.dev/docs/user-guide/configuration-reference/)
